!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const o=n(2),r=n(3);function s(t){if("string"!=typeof t)throw new Error("JSON is not string");const e=new o.Linter(t);return r.default.forEach(t=>{t().lint(e)}),e.errors}let c;e.lint=s,c="undefined"==typeof window?t:window,c.lint=s}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Linter=class{constructor(t){try{JSON.parse(t)}catch(t){throw t instanceof SyntaxError?new Error("JSON is not valid"):new Error(t)}this._json=t,this._errors=[]}get errors(){return this._errors}get json(){return this._json}parseBlock(t){return JSON.parse(this.json.slice(t.start,t.end+1))}findBrackets(t){return{start:this.findBracket(t,!0),end:this.findBracket(t,!1)}}findBracket(t,e){for(let n=t,o=1;e?n>=0:n<this.json.length;e?n-=1:n+=1)switch(this.json[n]){case e?"}":"{":o+=1;break;case e?"{":"}":if(o-=1,0===o)return n}return-1}addError(t,e,n){const o=this.getBlockInfo(t),r={code:e,error:n,location:{start:o.start,end:o.end}};this._errors.push(r)}getBlockInfo(t){const e=new RegExp("\\r\\n?|\\n|\\u2028|\\u2029","g");let n;for(let o=1,r=0,s=Object.create({}),c=Object.create({}),l=t.start;;){e.lastIndex=r;const i=e.exec(this.json);if(i&&i.index<l)o+=1,r=i.index+i[0].length;else{if(l!==t.start)return c.column=l-r+2,c.line=o,n={start:s,end:c},n;s.column=l-r+1,s.line=o,l=t.end}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=[()=>n(4),()=>n(5),()=>n(6),()=>n(7),()=>n(8),()=>n(9),()=>n(10),()=>n(11)];e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o="WARNING.INVALID_BUTTON_POSITION",r="Блок button в блоке warning не может находиться перед блоком placeholder на том же или более глубоком уровне вложенности.";e.lint=function(t){const e=[],n=new RegExp('"block"\\s*:\\s*"placeholder"',"g");for(let o=0;n.test(t.json);o+=1){const o=t.findBrackets(n.lastIndex),r=t.findBrackets(o.start-1);"warning"===t.parseBlock(r).block&&e.push({locParent:r,locPlaceholder:o})}const s=new RegExp('"block"\\s*:\\s*"button"',"g");for(let n=0;s.test(t.json);n+=1){const n=t.findBrackets(s.lastIndex);for(let s=0;s<e.length;s+=1)if(n.start>e[s].locParent.start&&n.end<e[s].locParent.end&&n.end<e[s].locPlaceholder.start){t.addError(n,o,r);break}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o="WARNING.INVALID_BUTTON_SIZE",r="Размер кнопки блока warning должен быть на 1 шаг больше эталонного.",s=["xxs","xs","s","m","l","xl","xxl","xxxl","xxxxl","xxxxxl"];e.lint=function(t){const e=new RegExp('"block"\\s*:\\s*"button"',"g");for(let n=0;e.test(t.json);n+=1){const n=t.findBrackets(e.lastIndex),c=t.parseBlock(n);let l;if(c.mods&&c.mods.size){l=c.mods.size;const e=t.findBrackets(n.start-1),i=t.parseBlock(e);if(Array.isArray(i.content)&&"warning"===i.block)for(let e,c=0;c<i.content.length;c+=1)if("text"===i.content[c].block&&i.content[c].mods&&i.content[c].mods.size&&(e=s[s.indexOf(i.content[c].mods.size)+1],l!==e)){t.addError(n,o,r);break}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o="TEXT.INVALID_H2_POSITION",r="Заголовок второго уровня (блок text с модификатором type h2) не может находиться перед заголовком первого уровня на том же или более глубоком уровне вложенности.";e.lint=function(t){let e=[];const n=new RegExp('"block"\\s*:\\s*"text"',"g");for(let s=0;n.test(t.json);s+=1){const s=t.findBrackets(n.lastIndex),c=t.parseBlock(s);c&&c.mods&&"h1"===c.mods.type?(e.forEach(e=>{t.addError(e,o,r)}),e=[]):c&&c.mods&&"h2"===c.mods.type&&e.push(s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o="TEXT.INVALID_H3_POSITION",r="Заголовок третьего уровня (блок text с модификатором type h3) не может находиться перед заголовком второго уровня на том же или более глубоком уровне вложенности.";e.lint=function(t){let e=[];const n=new RegExp('"block"\\s*:\\s*"text"',"g");for(let s=0;n.test(t.json);s+=1){const s=t.findBrackets(n.lastIndex),c=t.parseBlock(s);c&&c.mods&&"h2"===c.mods.type?(e.forEach(e=>{t.addError(e,o,r)}),e=[]):c&&c.mods&&"h3"===c.mods.type&&e.push(s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o="TEXT.SEVERAL_H1",r="Заголовок первого уровня (блок text с модификатором type h1) на странице должен быть единственным.";e.lint=function(t){let e={h1:!1};const n=new RegExp('"block"\\s*:\\s*"text"',"g");for(let s=0;n.test(t.json);s+=1){const s=t.findBrackets(n.lastIndex),c=t.parseBlock(s);c&&c.mods&&"h1"===c.mods.type&&(e.h1?t.addError(s,o,r):e.h1=!0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o="WARNING.TEXT_SIZES_SHOULD_BE_EQUAL",r="Текст не является эталонным.";e.lint=function(t){const e=new RegExp('"block"\\s*:\\s*"warning"',"g");for(let n=0;e.test(t.json);n+=1){const n=t.findBrackets(e.lastIndex),s=t.parseBlock(n);for(let e,c,l=0;l<s.content.length;l+=1)if("text"===s.content[l].block)if(e=s.content[l],c&&e.mods){if(e.mods.size!==c){t.addError(n,o,r);break}}else e.mods&&(c=e.mods.size)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o="WARNING.INVALID_PLACEHOLDER_SIZE",r="Допустимые размеры для блока placeholder в блоке warning (значение модификатора size): s, m, l.",s=["s","m","l"];e.lint=function(t){const e=new RegExp('"block"\\s*:\\s*"placeholder"',"g");for(let n=0;e.test(t.json);n+=1){const n=t.findBrackets(e.lastIndex),c=t.parseBlock(n);if(c.mods&&c.mods.size){const e=t.findBrackets(n.start-1);"warning"!==t.parseBlock(e).block||s.includes(c.mods.size)||t.addError(n,o,r)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=["commercial","offer"],r="GRID.TOO_MUCH_MARKETING_BLOCKS",s="Маркетинговые блоки занимают больше половины от всех колонок блока grid.";e.lint=function(t){const e=[],n=new RegExp('"block"\\s*:\\s*"grid"',"g");for(let o=0;n.test(t.json);o+=1){const o=t.findBrackets(n.lastIndex),r=t.parseBlock(o);if(r.mods&&r.mods["m-columns"])e.push({loc:o,columns:parseInt(r.mods["m-columns"],10)});else if(r.elemMods&&r.elemMods["m-col"])for(let t=0;t<e.length;t+=1)o.start>e[t].loc.start&&o.end<e[t].loc.end&&(e[t].hasOwnProperty("content")||(e[t].content=[]),e[t].content.push({columns:r.elemMods["m-col"],content:r.content}))}e.forEach(e=>{let n=0;for(let t=0;t<e.content.length;t+=1)o.includes(e.content[t].content[0].block)&&(n+=e.content[t].columns);n>parseInt(e.columns,10)/2&&t.addError(e.loc,r,s)})}}]);